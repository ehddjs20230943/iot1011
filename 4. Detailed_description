이 실습은 아두이노에 서미스터 온도 센서를 연결하여 실내의 온도를 측정하고, 해당 수치를 프로세싱으로 받아와 컴퓨터 화면에 출력하는 실습입니다.
먼저 아두이노의 회로를 전부 연결시켜줘야 하는데, 사진을 보고 따라하면 되지만 주의할 점은

1. A0에 연결되는 10k 저항, 온도 센서는 모두 같은 라인에 연결되어야 하고,
2. 저항의 반대쪽은 GND에 연결되어야 제대로 전원이 공급됩니다.

만약 작동 테스트를 위해 LED를 추가로 아두이노에 연결한다면
LED의 긴 다리를 13번 핀에, 짧은 다리를 GND에 직접 연결합니다(이 경우 추가로 pinMode를 통한 13번 핀을 활성화시켜줘야 합니다).



이후 아두이노의 코드를 작성하여 아두이노 본체에 업로드 시켜 주면 됩니다.
간단히 코드 설명을 덧붙이자면(이미 전 수업을 다 들었다고 가정하고):

이것이 가장 중점이되는 부분인데:
void loop() {
  int a = analogRead(A0); // analogRead() 를 사용하는 이유는 온도 센서를 포함한 조도, 소리 센서는 아날로그 핀을 사용하기 때문입니다.
  Serial.println(th(a)); // Secial.println() 으로 해당 센서가 받아온 값을 시리얼로 전송시킵니다.
  delay(500); // 컴퓨터로 전송할 온도 정보의 간격을 0.5초로 설정합니다.
}

중간에 a를 th()라는 함수에 전달하는 이유는, 아두이노의 온도 센서는 온도 값을 화씨로 받아오기 때문인데
이를 우리가 쉽게 알아볼 수 있는 섭씨(C)로 변환시켜주는 함수이기 때문입니다.
화씨 -> 섭씨 변환 코드는 다음과 같습니다:

double th(int v) {
  double t;
  t = log(((10240000/v) - 10000));
  t = 1 /(0.001129148 + (0.000234125*t) + (0.0000000876741*t*t*t));
  t = t - 273.15;
  return t;
}



업로드를 하고, 만약 테스틀르 위한 LED를 연결하고 if문을 사용하여 작동 유무를 확인하였다면 두번째 단계인 프로세싱을 통한 화면 출력을 해야합니다.
아두이노와 마찬가지로 간단히 코드 설명을 덧붙이자면:

import processing.serial.*; // 시리얼 참조를 한다 포인터를 선언하고
Serial p; // 시리얼 값을 받아올 변수를 하나 생성합니다.

void setup(){
  p = new Serial(this, "COM3", 9600); // 시리얼 변수를 컴퓨터와 연결된 아두이노로 설정하고
  size(400, 400); // 프로세싱의 시리얼 모니터 화면의 크기를 조절합니다.
}

void draw(){
  if(p.available() > 0){ // 만약, 시리얼 변수가 사용되고 있다면(갱신되고 있다면)
    String m = p.readStringUntil('\n'); // 문자열 변수 m을 만들고, 그곳에 시리얼로부터 받아온 정보를 넣습니다.

    if(m != null){ // 만약 시리얼로부터 받아온 정보가 비어있지 않다면
      print(m); // 화면에 그대로 m(온도정보)을 출력하고

      // 잠깐 여기서 m을 float()으로 감싸주는 이유는 문자열로 생성된 m은 실수 변환을 하지 않으면 if문에서 실수와 값을 비교할 수 없기 때문입니다.
      if(float(m) > 28.0) { // 만약 m이 28보다 크다면
        background(255, 0, 0); // 배경색을 255, 0, 0(빨강)으로 바꾼다.
      }
      else {
        background(0, 255, 0); // 위에 조건에 부합하지 않는다면 화면을 0, 255, 0(초록)으로 바꾼다.
      }
    }
  }
}
